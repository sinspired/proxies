# update: 20250608

# > Shadowrocket 快速使用方法：
# > 1、首页 > 添加节点。
# > 2、设置 > 延迟测试方法，选择 CONNECT。
# > 3、首页 > 连通性测试，选择可用节点连接。
# > 首次启动会提示【安装 VPN 配置文件】，请点击【好】和【允许】才能正常使用。

# > Shadowrocket打开HTTPS解密方法：
# > 1 点击配置文件ⓘ - HTTPS解密 - 证书 - 生成新的CA证书 - 安装证书
# > 2 手机设置 - 已下载描述文件 - 安装
# > 3 手机设置 - 通用 - 关于本机 - 证书信任设置 - 开启对应Shadowrocket证书信任
# > “配置文件”是指（配置 > 本地文件）中正在使用的带✔️标记的配置。多设备同步时，如果配置文件已经包含证书密钥内容，建议直接安装现有证书，而不要重新生成新的 CA 证书。

# > 请在「设置」-「GeoLite2资料库」-「国家」-「URL」填写下面链接
# > 依赖于 GeoIP2 数据库判断地址所属地
# > [Country](https://testingcf.jsdelivr.net/gh/Loyalsoldier/geoip@release/Country-only-cn-private.mmdb)
# > [ASN](https://testingcf.jsdelivr.net/gh/Loyalsoldier/geoip@release/Country-asn.mmdb)


# > 建议添加证书模块，避免切换配置导致模块失效：
# !name = 证书模块
# [MITM]
# enable = true
# ca-passphrase = Shadowrocket
# ca-p12 =

# > 更多使用说明，可参阅：[Shadowrocket使用手册](https://github.com/LOWERTOP/Shadowrocket)

[General]
# 启用 IPv6 支持。false 表示不启用，true 表示启用。启用会同时查询 A 记录和 AAAA 记录，优先使用 IPv4 地址解析。
ipv6 = true
# 旁路系统。如果禁用此选项，可能会导致一些系统问题，如推送通知延迟。
bypass-system = true
# 网络兼容模式。当参数的值设定为 3 时的效果等同于：设置 > 代理 > 代理类型 > None。
compatibility-mode = 3
# 跳过代理。此选项强制这些域名或 IP 的连接范围由 Shadowrocket TUN 接口来处理，而不是 Shadowrocket 代理服务器。此选项用于解决一些应用程序的一些兼容性问题。
skip-proxy = 192.168.0.0/16,10.0.0.0/8,172.16.0.0/12,localhost,*.local,captive.apple.com,*.ccb.com,*.abchina.com.cn,*.psbc.com,www.baidu.com
# TUN 旁路路由。Shadowrocket TUN 接口只能处理 TCP 协议。使用此选项可以绕过指定的 IP 范围，让其他协议通过。
tun-excluded-routes = 10.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.88.99.0/24, 192.168.0.0/16, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 255.255.255.255/32, 239.255.255.250/32

# DNS 覆写。使用普通 DNS 或加密 DNS（如 DoH、DoQ、DoT 等）覆盖默认的系统 DNS。填 system 表示使用系统 DNS。
# 普通 DNS 示例：
# dns-server = 223.5.5.5,119.29.29.29

# 加密 DNS 示例：
# 1、DNS-over-HTTPS（DoH）
# dns-server = https://dns.alidns.com/dns-query
# 2、DNS-over-HTTP/3（DoH3）
# dns-server = h3://dns.alidns.com/dns-query
# 3、DNS-over-QUIC（DoQ）
# dns-server = quic://223.5.5.5
# 4、DNS-over-TLS（DoT）
# dns-server = tls://223.5.5.5
dns-server = h3://dns.alidns.com/dns-query, https://dns.alidns.com/dns-query, https://doh.pub/dns-query
# 备用 DNS。当覆写 DNS 查询失败或查询时间超过 2 秒，Shadowrocket 会自动回退备用 DNS。如需指定多个 DNS，可用逗号分隔。system 表示回退到系统 DNS。
fallback-dns-server = https://doh.apad.pro/dns-query

# DNS 劫持。有些设备或软件总是使用硬编码的 DNS 服务器，例如 Netflix 通过 Google DNS(8.8.8.8或8.8.4.4)发送请求，您可以使用此选项来劫持查询。
hijack-dns = *:53
icmp-auto-reply = true
private-ip-answer = true
# 直连域名解析失败后使用代理。false 表示不启用。
dns-direct-fallback-proxy = false
udp-policy-not-supported-behaviour = REJECT

# 自动更新地址
update-url = https://testingcf.jsdelivr.net/gh/sinspired/proxies@main/shadowrocket-cdn.conf

[Proxy]
# 添加本地节点。该项目的节点解析是为了兼容部分配置文件，不能当作Shadowrocket添加节点的优先选择。

[Proxy Group]
# 代理分组类型：
# select:手动切换节点。
# url-test:自动切换延迟最低节点。
# fallback:节点挂掉时自动切换其他可用节点。
# load-balance:不同规则的请求使用分组里的不同节点进行连接。
# random:随机使用分组里的不同节点进行连接。

# policy-regex-filter表示正则式或关键词筛选，常用写法：
# 1、保留节点名称含有关键词A和B的节点:
# (?=.*(A))^(?=.*(B))^.*$
# 2、保留节点名称含有关键词A或B的节点:
# A|B
# 3、排除节点名称含有关键词A或B的节点:
# ^((?!(A|B)).)*$
# 4、保留节点名称含有关键词A并排除含有关键词B的节点:
# (?=.*(A))^((?!(B)).)*$

# 代理分组其他设置参数：
# interval:指定间隔多长时间后需要重新发起测试。
# timeout:如果测试在超时前未完成，放弃测试。
# tolerance:只有当新优胜者的分数高于旧优胜者的分数加上公差时，才会进行线路更换。
# url:指定要测试的URL。

# 拒绝访问,可选择直连
隐私防护 = select, REJECT, DIRECT
广告拦截 = select, REJECT, DIRECT
# 优先直连,支持切换地区
苹果服务 = select, DIRECT, PROXY, 香港优选, 台湾优选, 日本优选, 狮城优选, 美国优选, 韩国优选, 其他节点
OneDrive = select, DIRECT, PROXY, 香港优选, 台湾优选, 日本优选, 狮城优选, 美国优选, 韩国优选, 其他节点
微软服务 = select, DIRECT, PROXY, 香港优选, 台湾优选, 日本优选, 狮城优选, 美国优选, 韩国优选, 其他节点
PAYPAL = select, DIRECT, PROXY, 香港优选, 台湾优选, 日本优选, 狮城优选, 美国优选, 韩国优选, 其他节点
哔哩哔哩 = select, DIRECT, PROXY, 香港优选, 台湾优选, 日本优选, 狮城优选, 美国优选, 韩国优选, 其他节点
微信消息 = select, DIRECT, PROXY, 香港优选, 台湾优选, 日本优选, 狮城优选, 美国优选, 韩国优选, 其他节点
# 其它国内服务
国内媒体 = select, DIRECT, PROXY, 香港优选, 台湾优选, 日本优选, 狮城优选, 美国优选, 韩国优选, 其他节点, 自动选择
国内直连 = select, DIRECT, PROXY, 香港优选, 台湾优选, 日本优选, 狮城优选, 美国优选, 韩国优选, 其他节点, 自动选择
兜底分流= select, DIRECT, PROXY, 香港优选, 台湾优选, 日本优选, 狮城优选, 美国优选, 韩国优选, 其他节点, 自动选择

# ----------------------------------------
# 自动选择
全球代理 = select, 自动选择, 香港优选, 台湾优选, 日本优选, 狮城优选, 美国优选,韩国优选, 其他节点, PROXY
Github服务 = select, 自动选择, PROXY, 香港优选, 台湾优选, 日本优选, 狮城优选, 美国优选, 韩国优选, 其他节点

# 手动节点,方便测试网络情况
谷歌服务 = select, PROXY, 香港优选, 台湾优选, 日本优选, 狮城优选, 美国优选, 韩国优选, 其他节点, 自动选择

# 默认选择区域,减少封禁风险
Tg分流 = select, 香港优选, 台湾优选, 日本优选, 狮城优选, 美国优选, 韩国优选, PROXY, 自动选择, DIRECT
Spotify分流 = select, 香港优选, 台湾优选, 日本优选, 狮城优选, 美国优选, 韩国优选, PROXY, 自动选择, DIRECT

# 国际媒体方便切换地区
Twitter分流 = select, 香港优选, 台湾优选, 日本优选, 狮城优选, 美国优选,韩国优选, 其他节点, PROXY
Tiktok分流 = select, 香港优选, 台湾优选, 日本优选, 狮城优选, 美国优选,韩国优选, 其他节点, PROXY
Netflix分流 = select, 国际媒体, 香港优选, 台湾优选, 日本优选, 狮城优选, 美国优选,韩国优选, 其他节点, PROXY

# 节点筛选
国际媒体 = url-test, select=0, interval=600, tolerance=30, timeout=5, url=http://www.gstatic.com/generate_204, policy-regex-filter=(?i)(?=.*\bYoutube\b|disney|Netflix|youtube|YT|media|流媒体)^(?=.*(港|台|日|美|韩|新|阿拉伯|德|芬兰|HK|TW|JP|US|KR|SG|CMCC|CT|GB))^.*$
Youtube优选 = url-test, interval=600, tolerance=30, timeout=5, url=http://www.gstatic.com/generate_204, policy-regex-filter=(?i)(?=.*\bYoutube\b|youtube|YT|YouTube)^(?=.*(港|台|日|美|韩|新|阿拉伯|德|芬兰|HK|TW|JP|US|KR|SG|CMCC|CT|GB))^.*$

# ai 筛选
人工智能 = select, OpenAI优选, Gemini优选, Youtube优选, PROXY
OpenAI优选 = select, GPT_HK, GPT_TW, GPT_US, GPT_JP, GPT_Others
GPT_HK = url-test, select=0, interval=600, tolerance=30, timeout=5, url=http://www.gstatic.com/generate_204, policy-regex-filter=(?i)(?=.*\bOpenai\b|openai|chatgpt|gpt)^(?=.*(港|HK))^.*$
GPT_TW = url-test, select=0, interval=600, tolerance=30, timeout=5, url=http://www.gstatic.com/generate_204, policy-regex-filter=(?i)(?=.*\bOpenai\b|openai|chatgpt|gpt)^(?=.*(台|TW))^.*$
GPT_US = url-test, select=0, interval=600, tolerance=30, timeout=5, url=http://www.gstatic.com/generate_204, policy-regex-filter=(?i)(?=.*\bOpenai\b|openai|chatgpt|gpt)^(?=.*(美|US))^.*$
GPT_JP = url-test, select=0, interval=600, tolerance=30, timeout=5, url=http://www.gstatic.com/generate_204, policy-regex-filter=(?i)(?=.*\bOpenai\b|openai|chatgpt|gpt)^(?=.*(日|JP))^.*$
GPT_Others = url-test, select=0, interval=600, tolerance=30, timeout=5, url=http://www.gstatic.com/generate_204, policy-regex-filter=(?i)(?=.*\bOpenai\b|openai|chatgpt|gpt)^(?=.*(韩|新|阿拉伯|德|芬兰|KR|SG|CMCC|CT|GB))^.*$

Gemini优选 = url-test, select=0, interval=600, tolerance=30, timeout=5, url=http://www.gstatic.com/generate_204, policy-regex-filter=(?i)(?=.*\bGemini\b|gemini|GEMINI)^(?=.*(港|台|日|美|韩|新|阿拉伯|德|芬兰|HK|TW|JP|US|KR|SG|CMCC|CT|GB))^.*$

# 地区筛选
自动选择 = url-test, select=0, interval=600, tolerance=30, timeout=5, url=http://www.gstatic.com/generate_204, policy-regex-filter=^((?!(GiB|cn|中国|ru|Traffic|Expire|Premium|频道|订阅|ISP|流量|到期|重置|(?i)加入|更多)).)*$
香港优选 = url-test, select=0, interval=600, tolerance=30, timeout=5, url=http://www.gstatic.com/generate_204, policy-regex-filter=(?i)(?=.*\bHK\b|🇭🇰|香港|港|香江|Hong\s?Kong)
台湾优选 =  url-test, select=0, interval=600, tolerance=30, timeout=5, url=http://www.gstatic.com/generate_204, policy-regex-filter=(?i)(?=.*\bTW\b|🇹🇼|台湾|Taiwan|Taipei|台北|台|台中|新北|彰化)
日本优选 =  url-test, select=0, interval=600, tolerance=30, timeout=5, url=http://www.gstatic.com/generate_204, policy-regex-filter=(?i)(?=.*\bJP\b|🇯🇵|日本|日|Japan|Tokyo|东京|大阪|京日)
狮城优选 =  url-test, select=0, interval=600, tolerance=30, timeout=5, url=http://www.gstatic.com/generate_204, policy-regex-filter=(?i)(?=.*\bSG\b|🇸🇬|新加坡|狮城|Singapore)
美国优选 =  url-test, select=0, interval=600, tolerance=30, timeout=5, url=http://www.gstatic.com/generate_204, policy-regex-filter=(?i)(?=.*\bUS\b|🇺🇸|美国|States|American|凤凰城|洛杉矶|西雅图|芝加哥|纽约|美)
韩国优选 = url-test, select=0, interval=600, tolerance=30, timeout=5, url=http://www.gstatic.com/generate_204, policy-regex-filter=(?=.*(韩|首尔|KR|(?i)Korea))^((?!(美|日|台|港|新)).)*$
其他节点 = url-test, select=0, interval=600, tolerance=30, timeout=5, url=http://www.gstatic.com/generate_204, policy-regex-filter=^((?!(网易|美|US|(?i)States|American|日|JP|(?i)Japan|台|TW|(?i)Taiwan|韩|KR|(?i)Korea|港|HK|(?i)Hong|新|SG|(?i)Singapore|(?i)加入|更多|GiB|cn|ru|Traffic|Expire|Premium|频道|订阅|ISP|流量|到期|重置)).)*$

[Rule]
# 关于屏蔽443端口的UDP流量的解释内容：HTTP3/QUIC协议开始流行，但是国内ISP和国际出口的UDP优先级都很低，表现很差，屏蔽掉以强制回退HTTP2/HTTP1.
# AND,((PROTOCOL,UDP),(DST-PORT,443)),REJECT-NO-DROP

# 可信服务，比如苹果，最高优先级
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/GitHub/GitHub.list, Github服务
DOMAIN-SET, https://testingcf.jsdelivr.net/gh/Sinspired/Shadowrocket@main/Rules/Apple_Domain.list, 苹果服务
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Apple/Apple.list, 苹果服务
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/PayPal/PayPal.list, PAYPAL
# 本地局域网地址的规则集。
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Lan/Lan.list, DIRECT
RULE-SET, https://testingcf.jsdelivr.net/gh/Sinspired/Shadowrocket@main/Rules/Direct.list, DIRECT
# 广告拦截和隐私防护
RULE-SET, https://testingcf.jsdelivr.net/gh/Cats-Team/AdRules@main/adrules.list, 广告拦截
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Advertising/Advertising.list, 广告拦截
RULE-SET, https://testingcf.jsdelivr.net/gh/Sinspired/Shadowrocket@main/Rules/Hijacking.list, 隐私防护
RULE-SET, https://testingcf.jsdelivr.net/gh/Sinspired/Shadowrocket@main/Rules/Privacy_Domain.list, 隐私防护
RULE-SET, https://testingcf.jsdelivr.net/gh/Sinspired/Shadowrocket@main/Rules/Privacy.list, 隐私防护

# 国际服务
# 人工智能
RULE-SET, https://testingcf.jsdelivr.net/gh/Sinspired/Shadowrocket@main/Rules/Gemini.list, GEMINI优选
RULE-SET, https://testingcf.jsdelivr.net/gh/Sinspired/Shadowrocket@main/Rules/OpenAI.list, OPENAI优选
RULE-SET, https://testingcf.jsdelivr.net/gh/Sinspired/Shadowrocket@main/Rules/Copilot.list, 人工智能
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Claude/Claude.list, 人工智能
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Anthropic/Anthropic.list, 人工智能
RULE-SET, https://testingcf.jsdelivr.net/gh/sinspired/Shadowrocket@main/Rules/Grok.list, 人工智能
# 微软服务
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/OneDrive/OneDrive.list, OneDrive
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Microsoft/Microsoft.list, 微软服务
# Google服务
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/YouTube/YouTube.list, Youtube优选
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Google/Google.list, 谷歌服务
# 社交媒体
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Telegram/Telegram.list, Tg分流
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Twitter/Twitter.list, Twitter分流
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/TikTok/TikTok.list, Tiktok分流
# 国际媒体
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Spotify/Spotify.list, Spotify分流
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Netflix/Netflix.list, Netflix分流
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Disney/Disney.list, 国际媒体
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/HBO/HBO.list, 国际媒体
RULE-SET, https://testingcf.jsdelivr.net/gh/Sinspired/Shadowrocket@main/Rules/GlobalMedia_Domain.list, 国际媒体
RULE-SET, https://testingcf.jsdelivr.net/gh/Sinspired/Shadowrocket@main/Rules/GlobalMedia.list, 国际媒体

# 全球代理
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Facebook/Facebook.list, 全球代理
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Accuweather/Accuweather.list, 全球代理
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Amazon/Amazon.list, 全球代理
DOMAIN-SET, https://testingcf.jsdelivr.net/gh/Sinspired/Shadowrocket@main/Rules/Global_Domain.list, 全球代理
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Global/Global.list, 全球代理
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Proxy/Proxy.list, 全球代理

# 国内服务
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/WeChat/WeChat.list, 微信消息
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/BiliBili/BiliBili.list, 哔哩哔哩
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/AliPay/AliPay.list, 国内直连
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/JingDong/JingDong.list, 国内直连
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/MeiTuan/MeiTuan.list, 国内直连
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/DiDi/DiDi.list, 国内直连
# 国内媒体
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Weibo/Weibo.list, 国内媒体
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/NetEaseMusic/NetEaseMusic.list, 国内媒体
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/iQIYI/iQIYI.list, 国内媒体
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/DouYin/DouYin.list, 国内媒体
RULE-SET, https://testingcf.jsdelivr.net/gh/Sinspired/Shadowrocket@main/Rules/ChinaMedia.list, 国内媒体
# 国内直连
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Alibaba/Alibaba.list, 国内直连
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Sina/Sina.list, 国内直连
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Zhihu/Zhihu.list, 国内直连
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/XiaoHongShu/XiaoHongShu.list, 国内直连
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Baidu/Baidu.list, 国内直连
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/DouBan/DouBan.list, 国内直连
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/NetEase/NetEase.list, 国内直连
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/ByteDance/ByteDance.list, 国内直连

DOMAIN-SET, https://testingcf.jsdelivr.net/gh/Sinspired/Shadowrocket@main/Rules/China_Domain.list, 国内直连
RULE-SET, https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/China/China.list, 国内直连
GEOIP, CN, 国内直连
# 使用直连兜底
FINAL, 兜底分流

[Host]
localhost = 127.0.0.1
# 域名指定 DNS 服务器：
# *.apple.com = server:system
# *.icloud.com = server:system
# *.bilibili.com = server:system
# *.bilibili.net = server:system
# *.biliapi.com = server:system
# *.biliapi.net = server:system

[URL Rewrite]
# Google搜索引擎防跳转的重写。
^https?://(www.)?g.cn https://www.google.com 302
^https?://(www.)?google.cn https://www.google.com 302

# ======= huggingface 镜像 ======= #
^https?://(www\.)?huggingface\.co/(.*) https://hf-mirror.com/$2 302
# ======= 油管视频广告请求 ======= #
(^https?:\/\/[\w-]+\.googlevideo\.com\/(?!dclk_video_ads).+?)&ctier=L(&.+?),ctier,(.+) $1$2$3 302
^https?:\/\/[\w-]+\.googlevideo\.com\/(?!(dclk_video_ads|videoplayback\?)).+&oad - reject
# ======= Google DNS 劫持 ======= #
^https?://(www\.)?dns.google(:443)/query https://doh.pub/dns-query 302
^https?://(www\.)?dns.google(:443)/resolve https://223.5.5.5/resolve 302

# ======= 需要手动添加模块（模块需定期更新确保可用性，模块安装遇到超时小火箭切全局代理安装） ====== #
# > 1 （建议添加）Youtube去广告及功能增强 https://github.com/Maasea/sgmodule/raw/master/YouTube.Enhance.sgmodule
# > 2 （建议添加）墨鱼去广告合集[去开屏2.0|喜马拉雅|哔哩哔哩|微博|油管|KEEP|贴吧|知乎|高德地图|小红书|网易云|百度地图|什么值得买|菜鸟|彩云天气|豆瓣网页] https://github.com/ddgksf2013/Modules/raw/main/Adblock.sgmodule

[MITM]
# > Shadowrocket仅会解密hostname指定的域名的请求，可以使用通配符。也可以使用前缀 - 排除特定主机名，如 -*.example.com
# > iOS系统和某些应用有严格的安全策略，仅信任某些特定的证书，对这些域名启动解密可能导致问题，如 *.apple.com，*.icloud.com。
hostname = *.googlevideo.com, *.google.cn, -*.apple.com, -consumer.fcbox.com, -*huami.com, -weather-data.apple.com, -*amemv.com, -*snssdk.com, -www.google.com
enable = true
ca-passphrase = Shadowrocket