#update: 20250530

# > Shadowrocket å¿«é€Ÿä½¿ç”¨æ–¹æ³•ï¼š
# > 1ã€é¦–é¡µ > æ·»åŠ èŠ‚ç‚¹ã€‚
# > 2ã€è®¾ç½® > å»¶è¿Ÿæµ‹è¯•æ–¹æ³•ï¼Œé€‰æ‹© CONNECTã€‚
# > 3ã€é¦–é¡µ > è¿é€šæ€§æµ‹è¯•ï¼Œé€‰æ‹©å¯ç”¨èŠ‚ç‚¹è¿æ¥ã€‚
# > é¦–æ¬¡å¯åŠ¨ä¼šæç¤ºã€å®‰è£… VPN é…ç½®æ–‡ä»¶ã€‘ï¼Œè¯·ç‚¹å‡»ã€å¥½ã€‘å’Œã€å…è®¸ã€‘æ‰èƒ½æ­£å¸¸ä½¿ç”¨ã€‚

# > Shadowrocketæ‰“å¼€HTTPSè§£å¯†æ–¹æ³•ï¼š
# > 1 ç‚¹å‡»é…ç½®æ–‡ä»¶â“˜ - HTTPSè§£å¯† - è¯ä¹¦ - ç”Ÿæˆæ–°çš„CAè¯ä¹¦ - å®‰è£…è¯ä¹¦
# > 2 æ‰‹æœºè®¾ç½® - å·²ä¸‹è½½æè¿°æ–‡ä»¶ - å®‰è£…
# > 3 æ‰‹æœºè®¾ç½® - é€šç”¨ - å…³äºæœ¬æœº - è¯ä¹¦ä¿¡ä»»è®¾ç½® - å¼€å¯å¯¹åº”Shadowrocketè¯ä¹¦ä¿¡ä»»
# > â€œé…ç½®æ–‡ä»¶â€æ˜¯æŒ‡ï¼ˆé…ç½® > æœ¬åœ°æ–‡ä»¶ï¼‰ä¸­æ­£åœ¨ä½¿ç”¨çš„å¸¦âœ”ï¸æ ‡è®°çš„é…ç½®ã€‚å¤šè®¾å¤‡åŒæ­¥æ—¶ï¼Œå¦‚æœé…ç½®æ–‡ä»¶å·²ç»åŒ…å«è¯ä¹¦å¯†é’¥å†…å®¹ï¼Œå»ºè®®ç›´æ¥å®‰è£…ç°æœ‰è¯ä¹¦ï¼Œè€Œä¸è¦é‡æ–°ç”Ÿæˆæ–°çš„ CA è¯ä¹¦ã€‚

# > è¯·åœ¨ã€Œè®¾ç½®ã€-ã€ŒGeoLite2èµ„æ–™åº“ã€-ã€Œå›½å®¶ã€-ã€ŒURLã€å¡«å†™ä¸‹é¢é“¾æ¥
# > ä¾èµ–äº GeoIP2 æ•°æ®åº“åˆ¤æ–­åœ°å€æ‰€å±åœ°
# > [Country](https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country-only-cn-private.mmdb) 
# > [ASN](https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country-asn.mmdb)


# > å»ºè®®æ·»åŠ è¯ä¹¦æ¨¡å—ï¼Œé¿å…åˆ‡æ¢é…ç½®å¯¼è‡´æ¨¡å—å¤±æ•ˆï¼š
# !name = è¯ä¹¦æ¨¡å—
# [MITM]
# enable = true
# ca-passphrase = Shadowrocket
# ca-p12 = 

# > æ›´å¤šä½¿ç”¨è¯´æ˜ï¼Œå¯å‚é˜…ï¼š[Shadowrocketä½¿ç”¨æ‰‹å†Œ](https://github.com/LOWERTOP/Shadowrocket)

[General]
# å¯ç”¨ IPv6 æ”¯æŒã€‚false è¡¨ç¤ºä¸å¯ç”¨ï¼Œtrue è¡¨ç¤ºå¯ç”¨ã€‚å¯ç”¨ä¼šåŒæ—¶æŸ¥è¯¢ A è®°å½•å’Œ AAAA è®°å½•ï¼Œä¼˜å…ˆä½¿ç”¨ IPv4 åœ°å€è§£æã€‚
ipv6 = true
# æ—è·¯ç³»ç»Ÿã€‚å¦‚æœç¦ç”¨æ­¤é€‰é¡¹ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸€äº›ç³»ç»Ÿé—®é¢˜ï¼Œå¦‚æ¨é€é€šçŸ¥å»¶è¿Ÿã€‚
bypass-system = true
# ç½‘ç»œå…¼å®¹æ¨¡å¼ã€‚å½“å‚æ•°çš„å€¼è®¾å®šä¸º 3 æ—¶çš„æ•ˆæœç­‰åŒäºï¼šè®¾ç½® > ä»£ç† > ä»£ç†ç±»å‹ > Noneã€‚
compatibility-mode = 3
tun-excluded-routes = 10.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.88.99.0/24, 192.168.0.0/16, 224.0.0.0/4, 239.255.255.250/32, 255.255.255.255/32
dns-server = 114.114.114.114, https://dns.alidns.com/dns-query, https://doh.pub/dns-query, 8.8.8.8
fallback-dns-server = https://doh.apad.pro/dns-query
hijack-dns = *:53
icmp-auto-reply = true
private-ip-answer = true
dns-direct-fallback-proxy = true
udp-policy-not-supported-behaviour = REJECT
update-url = https://raw.githubusercontent.com/sinspired/proxies/main/shadowrocket-raw.conf

[Proxy]
# æ·»åŠ æœ¬åœ°èŠ‚ç‚¹ã€‚è¯¥é¡¹ç›®çš„èŠ‚ç‚¹è§£ææ˜¯ä¸ºäº†å…¼å®¹éƒ¨åˆ†é…ç½®æ–‡ä»¶ï¼Œä¸èƒ½å½“ä½œShadowrocketæ·»åŠ èŠ‚ç‚¹çš„ä¼˜å…ˆé€‰æ‹©ã€‚

[Proxy Group]
# ä»£ç†åˆ†ç»„ç±»å‹ï¼š
# select:æ‰‹åŠ¨åˆ‡æ¢èŠ‚ç‚¹ã€‚
# url-test:è‡ªåŠ¨åˆ‡æ¢å»¶è¿Ÿæœ€ä½èŠ‚ç‚¹ã€‚
# fallback:èŠ‚ç‚¹æŒ‚æ‰æ—¶è‡ªåŠ¨åˆ‡æ¢å…¶ä»–å¯ç”¨èŠ‚ç‚¹ã€‚
# load-balance:ä¸åŒè§„åˆ™çš„è¯·æ±‚ä½¿ç”¨åˆ†ç»„é‡Œçš„ä¸åŒèŠ‚ç‚¹è¿›è¡Œè¿æ¥ã€‚
# random:éšæœºä½¿ç”¨åˆ†ç»„é‡Œçš„ä¸åŒèŠ‚ç‚¹è¿›è¡Œè¿æ¥ã€‚

# policy-regex-filterè¡¨ç¤ºæ­£åˆ™å¼æˆ–å…³é”®è¯ç­›é€‰ï¼Œå¸¸ç”¨å†™æ³•ï¼š
# 1ã€ä¿ç•™èŠ‚ç‚¹åç§°å«æœ‰å…³é”®è¯Aå’ŒBçš„èŠ‚ç‚¹:
# (?=.*(A))^(?=.*(B))^.*$
# 2ã€ä¿ç•™èŠ‚ç‚¹åç§°å«æœ‰å…³é”®è¯Aæˆ–Bçš„èŠ‚ç‚¹:
# A|B
# 3ã€æ’é™¤èŠ‚ç‚¹åç§°å«æœ‰å…³é”®è¯Aæˆ–Bçš„èŠ‚ç‚¹:
# ^((?!(A|B)).)*$
# 4ã€ä¿ç•™èŠ‚ç‚¹åç§°å«æœ‰å…³é”®è¯Aå¹¶æ’é™¤å«æœ‰å…³é”®è¯Bçš„èŠ‚ç‚¹:
# (?=.*(A))^((?!(B)).)*$

éšç§é˜²æŠ¤ = select, REJECT, DIRECT
å¾®ä¿¡æ¶ˆæ¯ = select, DIRECT, PROXY, é¦™æ¸¯ä¼˜é€‰, å°æ¹¾ä¼˜é€‰, æ—¥æœ¬ä¼˜é€‰, ç‹®åŸä¼˜é€‰, ç¾å›½ä¼˜é€‰, éŸ©å›½ä¼˜é€‰, å…¶ä»–èŠ‚ç‚¹
ç”µæŠ¥æ¶ˆæ¯ = select, è‡ªåŠ¨é€‰æ‹©, PROXY, é¦™æ¸¯ä¼˜é€‰, å°æ¹¾ä¼˜é€‰, æ—¥æœ¬ä¼˜é€‰, ç‹®åŸä¼˜é€‰, ç¾å›½ä¼˜é€‰
äººå·¥æ™ºèƒ½ = url-test, url=http://www.gstatic.com/generate_204,interval=600, tolerance=10, timeout=5, select=0, policy-regex-filter=(?i)(?=.*\bOpenai\b|openai|chatgpt|gpt|gemini|äººå·¥æ™ºèƒ½|Copilot|copilot|bard|huggingface)
OpenAIä¼˜é€‰ =  url-test, url=http://www.gstatic.com/generate_204,interval=600, tolerance=10, timeout=5, select=0, policy-regex-filter=(?i)(?=.*\bOpenai\b|openai|chatgpt|gpt)
Geminiä¼˜é€‰ =  url-test, url=http://www.gstatic.com/generate_204,interval=600, tolerance=10, timeout=5, select=0, policy-regex-filter=(?i)(?=.*\bGemini\b|gemini|GEMINI)
è‹¹æœæœåŠ¡ = select, DIRECT, PROXY, é¦™æ¸¯ä¼˜é€‰, å°æ¹¾ä¼˜é€‰, æ—¥æœ¬ä¼˜é€‰, ç‹®åŸä¼˜é€‰, ç¾å›½ä¼˜é€‰, éŸ©å›½ä¼˜é€‰, å…¶ä»–èŠ‚ç‚¹
Spotifyåˆ†æµ = select, ç¾å›½ä¼˜é€‰, è‡ªåŠ¨é€‰æ‹©, PROXY, é¦™æ¸¯ä¼˜é€‰, å°æ¹¾ä¼˜é€‰, æ—¥æœ¬ä¼˜é€‰, ç‹®åŸä¼˜é€‰, éŸ©å›½ä¼˜é€‰, å…¶ä»–èŠ‚ç‚¹
å¾®è½¯æœåŠ¡ = select, DIRECT, PROXY, é¦™æ¸¯ä¼˜é€‰, å°æ¹¾ä¼˜é€‰, æ—¥æœ¬ä¼˜é€‰, ç‹®åŸä¼˜é€‰, ç¾å›½ä¼˜é€‰, éŸ©å›½ä¼˜é€‰, å…¶ä»–èŠ‚ç‚¹
OneDriveåŠ é€Ÿ = select, PROXY, DIRECT, é¦™æ¸¯ä¼˜é€‰, å°æ¹¾ä¼˜é€‰, æ—¥æœ¬ä¼˜é€‰, ç‹®åŸä¼˜é€‰, ç¾å›½ä¼˜é€‰, éŸ©å›½ä¼˜é€‰, å…¶ä»–èŠ‚ç‚¹
è°·æ­ŒæœåŠ¡ = select, PROXY, é¦™æ¸¯ä¼˜é€‰, å°æ¹¾ä¼˜é€‰, æ—¥æœ¬ä¼˜é€‰, ç‹®åŸä¼˜é€‰, ç¾å›½ä¼˜é€‰, éŸ©å›½ä¼˜é€‰, å…¶ä»–èŠ‚ç‚¹
å…¨çƒä»£ç† = select,è‡ªåŠ¨é€‰æ‹©,é¦™æ¸¯ä¼˜é€‰, å°æ¹¾ä¼˜é€‰, æ—¥æœ¬ä¼˜é€‰, ç‹®åŸä¼˜é€‰, ç¾å›½ä¼˜é€‰,éŸ©å›½ä¼˜é€‰,å…¶ä»–èŠ‚ç‚¹
å›½é™…åª’ä½“ = load-balance,interval=600, tolerance=10, timeout=5,url=http://www.gstatic.com/generate_204,policy-regex-filter=(?i)(?=.*\bYoutube\b|disney|Netflix|youtube|YT|media|è§£é”|æµåª’ä½“)
Youtubeä¼˜é€‰ =  url-test, url=http://www.gstatic.com/generate_204,interval=600, tolerance=10, timeout=5, select=0, policy-regex-filter=(?i)(?=.*\bYoutube\b|youtube|YT|YouTube)
å›½å†…åª’ä½“ = select, DIRECT, PROXY, é¦™æ¸¯ä¼˜é€‰, å°æ¹¾ä¼˜é€‰, æ—¥æœ¬ä¼˜é€‰, ç‹®åŸä¼˜é€‰, ç¾å›½ä¼˜é€‰, éŸ©å›½ä¼˜é€‰, å…¶ä»–èŠ‚ç‚¹
å›½å†…ç›´è¿ = select, DIRECT, PROXY, é¦™æ¸¯ä¼˜é€‰, å°æ¹¾ä¼˜é€‰, æ—¥æœ¬ä¼˜é€‰, ç‹®åŸä¼˜é€‰, ç¾å›½ä¼˜é€‰, éŸ©å›½ä¼˜é€‰, å…¶ä»–èŠ‚ç‚¹
å…œåº•åˆ†æµ= select,DIRECT,PROXY,è‡ªåŠ¨é€‰æ‹©,é¦™æ¸¯ä¼˜é€‰, å°æ¹¾ä¼˜é€‰, æ—¥æœ¬ä¼˜é€‰, ç‹®åŸä¼˜é€‰, ç¾å›½ä¼˜é€‰, éŸ©å›½ä¼˜é€‰, å…¶ä»–èŠ‚ç‚¹

è‡ªåŠ¨é€‰æ‹© = url-test, url=http://www.gstatic.com/generate_204,interval=600, tolerance=10, timeout=5, select=0, policy-regex-filter=^((?!(cn|ru|Traffic|Expire|Premium|é¢‘é“|è®¢é˜…|ISP|æµé‡|åˆ°æœŸ|é‡ç½®|(?i)åŠ å…¥|æ›´å¤š)).)*$
é¦™æ¸¯ä¼˜é€‰ = url-test, url=http://www.gstatic.com/generate_204, interval=600, tolerance=10, timeout=5, select=0, policy-regex-filter=(?i)(?=.*\bHK\b|ğŸ‡­ğŸ‡°|é¦™æ¸¯|é¦™æ±Ÿ|Hong\s?Kong)
å°æ¹¾ä¼˜é€‰ = url-test, url=http://www.gstatic.com/generate_204, interval=600, tolerance=10, timeout=5, select=0, policy-regex-filter=(?i)(?=.*\bTW\b|ğŸ‡¹ğŸ‡¼|å°æ¹¾|Taiwan|Taipei|å°åŒ—|å°ä¸­|æ–°åŒ—|å½°åŒ–)
æ—¥æœ¬ä¼˜é€‰ = url-test, url=http://www.gstatic.com/generate_204, interval=600, tolerance=10, timeout=5, select=0, policy-regex-filter=(?i)(?=.*\bJP\b|ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|Japan|Tokyo|ä¸œäº¬|å¤§é˜ª|äº¬æ—¥)
ç‹®åŸä¼˜é€‰ = url-test, url=http://www.gstatic.com/generate_204, interval=600, tolerance=10, timeout=5, select=0, policy-regex-filter=(?i)(?=.*\bSG\b|ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®åŸ|Singapore)
ç¾å›½ä¼˜é€‰ = url-test, url=http://www.gstatic.com/generate_204, interval=600, tolerance=10, timeout=5, select=0, policy-regex-filter=(?i)(?=.*\bUS\b|ğŸ‡ºğŸ‡¸|ç¾å›½|States|American|å‡¤å‡°åŸ|æ´›æ‰çŸ¶|è¥¿é›…å›¾|èŠåŠ å“¥|çº½çº¦|ç¾)
éŸ©å›½ä¼˜é€‰ = url-test, url=http://www.gstatic.com/generate_204,, interval=600, tolerance=10, timeout=5, select=0, policy-regex-filter=(?=.*(éŸ©|KR|(?i)Korea))^((?!(ç¾|æ—¥|å°|æ¸¯|æ–°)).)*$
å…¶ä»–èŠ‚ç‚¹ = url-test,url=http://www.gstatic.com/generate_204,, interval=600, tolerance=10, timeout=5, select=0, policy-regex-filter=^((?!(ç½‘æ˜“|ç¾|US|(?i)States|American|æ—¥|JP|(?i)Japan|å°|TW|(?i)Taiwan|éŸ©|KR|(?i)Korea|æ¸¯|HK|(?i)Hong|æ–°|SG|(?i)Singapore|(?i)åŠ å…¥|æ›´å¤š|cn|ru|Traffic|Expire|Premium|é¢‘é“|è®¢é˜…|ISP|æµé‡|åˆ°æœŸ|é‡ç½®)).)*$

[Rule]
RULE-SET, https://raw.githubusercontent.com/Cats-Team/AdRules/main/adrules.list, REJECT
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Advertising/Advertising.list, REJECT
RULE-SET, https://raw.githubusercontent.com/xiangwanguan/Shadowrocket/main/Rules/Lan.list, DIRECT
RULE-SET, https://raw.githubusercontent.com/xiangwanguan/Shadowrocket/main/Rules/Hijacking.list, éšç§é˜²æŠ¤
RULE-SET, https://raw.githubusercontent.com/xiangwanguan/Shadowrocket/main/Rules/Privacy.list, éšç§é˜²æŠ¤
RULE-SET, https://raw.githubusercontent.com/xiangwanguan/Shadowrocket/main/Rules/Direct.list, DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/NetEase/NetEase.list,DIRECT
RULE-SET, https://raw.githubusercontent.com/xiangwanguan/Shadowrocket/main/Rules/WeChat.list, å¾®ä¿¡æ¶ˆæ¯
RULE-SET, https://raw.githubusercontent.com/xiangwanguan/Shadowrocket/main/Rules/Telegram.list, ç”µæŠ¥æ¶ˆæ¯
RULE-SET,https://raw.githubusercontent.com/XiangwanGuan/Shadowrocket/main/Rules/OpenAI.list,OPENAIä¼˜é€‰
RULE-SET,https://raw.githubusercontent.com/XiangwanGuan/Shadowrocket/main/Rules/Gemini.list,GEMINIä¼˜é€‰
RULE-SET,https://raw.githubusercontent.com/XiangwanGuan/Shadowrocket/main/Rules/Copilot.list,äººå·¥æ™ºèƒ½
RULE-SET, https://raw.githubusercontent.com/xiangwanguan/Shadowrocket/main/Rules/Ai.list, äººå·¥æ™ºèƒ½
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/YouTube/YouTube.list, Youtubeä¼˜é€‰
RULE-SET,https://whatshub.top/rule/Spotify.list,Spotifyåˆ†æµ
RULE-SET, https://raw.githubusercontent.com/xiangwanguan/Shadowrocket/main/Rules/Apple.list, è‹¹æœæœåŠ¡
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/OneDrive/OneDrive.list, OneDriveåŠ é€Ÿ
RULE-SET, https://raw.githubusercontent.com/xiangwanguan/Shadowrocket/main/Rules/Microsoft.list, å¾®è½¯æœåŠ¡
RULE-SET, https://raw.githubusercontent.com/xiangwanguan/Shadowrocket/main/Rules/Google.list, è°·æ­ŒæœåŠ¡
RULE-SET, https://raw.githubusercontent.com/xiangwanguan/Shadowrocket/main/Rules/GlobalMedia.list, å›½é™…åª’ä½“
RULE-SET, https://raw.githubusercontent.com/xiangwanguan/Shadowrocket/main/Rules/Global.list, å…¨çƒä»£ç†
RULE-SET, https://raw.githubusercontent.com/xiangwanguan/Shadowrocket/main/Rules/ChinaMedia.list, å›½å†…åª’ä½“
RULE-SET, https://raw.githubusercontent.com/xiangwanguan/Shadowrocket/main/Rules/China.list, å›½å†…ç›´è¿
GEOIP, CN, å›½å†…ç›´è¿
FINAL, å…œåº•åˆ†æµ

[Host]
localhost = 127.0.0.1

[URL Rewrite]
^https?://(www.)?g.cn https://www.google.com 302
^https?://(www.)?google.cn https://www.google.com 302

# ======= æ²¹ç®¡è§†é¢‘å¹¿å‘Šè¯·æ±‚ ======= #
(^https?:\/\/[\w-]+\.googlevideo\.com\/(?!dclk_video_ads).+?)&ctier=L(&.+?),ctier,(.+) $1$2$3 302 
^https?:\/\/[\w-]+\.googlevideo\.com\/(?!(dclk_video_ads|videoplayback\?)).+&oad - reject

# ======= éœ€è¦æ‰‹åŠ¨æ·»åŠ æ¨¡å—ï¼ˆæ¨¡å—éœ€å®šæœŸæ›´æ–°ç¡®ä¿å¯ç”¨æ€§ï¼Œæ¨¡å—å®‰è£…é‡åˆ°è¶…æ—¶å°ç«ç®­åˆ‡å…¨å±€ä»£ç†å®‰è£…ï¼‰ ====== #
# > 1 ï¼ˆå»ºè®®æ·»åŠ ï¼‰Youtubeå»å¹¿å‘ŠåŠåŠŸèƒ½å¢å¼º https://github.com/Maasea/sgmodule/raw/master/YouTube.Enhance.sgmodule
# > 2 ï¼ˆå»ºè®®æ·»åŠ ï¼‰å¢¨é±¼å»å¹¿å‘Šåˆé›†[å»å¼€å±2.0|å–œé©¬æ‹‰é›…|å“”å“©å“”å“©|å¾®åš|æ²¹ç®¡|KEEP|è´´å§|çŸ¥ä¹|é«˜å¾·åœ°å›¾|å°çº¢ä¹¦|ç½‘æ˜“äº‘|ç™¾åº¦åœ°å›¾|ä»€ä¹ˆå€¼å¾—ä¹°|èœé¸Ÿ|å½©äº‘å¤©æ°”|è±†ç“£ç½‘é¡µ]  https://github.com/ddgksf2013/Modules/raw/main/Adblock.sgmodule

[MITM]
# > Shadowrocketä»…ä¼šè§£å¯†hostnameæŒ‡å®šçš„åŸŸåçš„è¯·æ±‚ï¼Œå¯ä»¥ä½¿ç”¨é€šé…ç¬¦ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨å‰ç¼€ - æ’é™¤ç‰¹å®šä¸»æœºåï¼Œå¦‚ -*.example.com
# > iOSç³»ç»Ÿå’ŒæŸäº›åº”ç”¨æœ‰ä¸¥æ ¼çš„å®‰å…¨ç­–ç•¥ï¼Œä»…ä¿¡ä»»æŸäº›ç‰¹å®šçš„è¯ä¹¦ï¼Œå¯¹è¿™äº›åŸŸåå¯åŠ¨è§£å¯†å¯èƒ½å¯¼è‡´é—®é¢˜ï¼Œå¦‚ *.apple.comï¼Œ*.icloud.comã€‚
hostname = *.googlevideo.com, *.google.cn, -*.apple.com, -consumer.fcbox.com, -*huami.com, -weather-data.apple.com, -*amemv.com, -*snssdk.com, -www.google.com
enable = true
ca-passphrase = Shadowrocket
